from flask import request, render_template

from opencve.controllers.main import main
from opencve.controllers.clients import ClientController
from opencve.utils import get_clients_letters
from opencve.models.clients import Client


@main.route("/clients")
def clients():
    clients, _, pagination = ClientController.list(request.args)
    return render_template(
        "clients.html",
        clients=clients,
        letters=get_clients_letters(),
        pagination=pagination,
    )


@main.route("/client/<client_name>")
def client(client_name):
    client=Client.query.filter_by(name=client_name).first()
    return render_template(
        "client.html",
        client=client,
    )
